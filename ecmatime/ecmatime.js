var $apeiro=(()=>{var Ge=Object.defineProperty;var Yr=Object.getOwnPropertyDescriptor;var Hr=Object.getOwnPropertyNames;var qr=Object.prototype.hasOwnProperty;var q=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var bt=(t,e)=>{for(var r in e)Ge(t,r,{get:e[r],enumerable:!0})},Jr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Hr(e))!qr.call(t,s)&&s!==r&&Ge(t,s,{get:()=>e[s],enumerable:!(n=Yr(e,s))||n.enumerable});return t};var Gr=t=>Jr(Ge({},"__esModule",{value:!0}),t);var ls={};bt(ls,{Decoder:()=>st,Encoder:()=>it,step:()=>cs});function Xe(t){let e=t.length,r=0,n=0;for(;n<e;){let s=t.charCodeAt(n++);if((s&4294967168)===0){r++;continue}else if((s&4294965248)===0)r+=2;else{if(s>=55296&&s<=56319&&n<e){let a=t.charCodeAt(n);(a&64512)===56320&&(++n,s=((s&1023)<<10)+(a&1023)+65536)}(s&4294901760)===0?r+=3:r+=4}}return r}function wt(t,e,r){let n=t.length,s=r,a=0;for(;a<n;){let i=t.charCodeAt(a++);if((i&4294967168)===0){e[s++]=i;continue}else if((i&4294965248)===0)e[s++]=i>>6&31|192;else{if(i>=55296&&i<=56319&&a<n){let o=t.charCodeAt(a);(o&64512)===56320&&(++a,i=((i&1023)<<10)+(o&1023)+65536)}(i&4294901760)===0?(e[s++]=i>>12&15|224,e[s++]=i>>6&63|128):(e[s++]=i>>18&7|240,e[s++]=i>>12&63|128,e[s++]=i>>6&63|128)}e[s++]=i&63|128}}var Xr=new TextEncoder,Tt=200;function Qr(t,e,r){Xr.encodeInto(t,e.subarray(r))}var St=Qr,en=4096;function ze(t,e,r){let n=e,s=n+r,a=[],i="";for(;n<s;){let o=t[n++];if((o&128)===0)a.push(o);else if((o&224)===192){let d=t[n++]&63;a.push((o&31)<<6|d)}else if((o&240)===224){let d=t[n++]&63,c=t[n++]&63;a.push((o&31)<<12|d<<6|c)}else if((o&248)===240){let d=t[n++]&63,c=t[n++]&63,b=t[n++]&63,Z=(o&7)<<18|d<<12|c<<6|b;Z>65535&&(Z-=65536,a.push(Z>>>10&1023|55296),Z=56320|Z&1023),a.push(Z)}else a.push(o);a.length>=en&&(i+=String.fromCharCode(...a),a.length=0)}return a.length>0&&(i+=String.fromCharCode(...a)),i}var tn=new TextDecoder,Et=200;function kt(t,e,r){let n=t.subarray(e,e+r);return tn.decode(n)}var $=class{constructor(e,r){this.type=e;this.data=r}};function Zt(t,e,r){let n=r/4294967296,s=r;t.setUint32(e,n),t.setUint32(e+4,s)}function $e(t,e,r){let n=Math.floor(r/4294967296),s=r;t.setUint32(e,n),t.setUint32(e+4,s)}function Ke(t,e){let r=t.getInt32(e),n=t.getUint32(e+4);return r*4294967296+n}function Dt(t,e){let r=t.getUint32(e),n=t.getUint32(e+4);return r*4294967296+n}var At=-1,rn=4294967296-1,nn=17179869184-1;function Pt({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=nn)if(e===0&&t<=rn){let r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t),r}else{let r=t/4294967296,n=t&4294967295,s=new Uint8Array(8),a=new DataView(s.buffer);return a.setUint32(0,e<<2|r&3),a.setUint32(4,n),s}else{let r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,e),$e(n,4,t),r}}function Ot(t){let e=t.getTime(),r=Math.floor(e/1e3),n=(e-r*1e3)*1e6,s=Math.floor(n/1e9);return{sec:r+s,nsec:n-s*1e9}}function Ut(t){if(t instanceof Date){let e=Ot(t);return Pt(e)}else return null}function Ct(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{let r=e.getUint32(0),n=e.getUint32(4),s=(r&3)*4294967296+n,a=r>>>2;return{sec:s,nsec:a}}case 12:{let r=Ke(e,4),n=e.getUint32(0);return{sec:r,nsec:n}}default:throw new Error(`Unrecognized data size for timestamp: ${t.length}`)}}function It(t){let e=Ct(t);return new Date(e.sec*1e3+e.nsec/1e6)}var jt={type:At,encode:Ut,decode:It};var Qe=class{constructor(){this.builtInEncoders=[];this.builtInDecoders=[];this.encoders=[];this.decoders=[];this.register(jt)}register({type:e,encode:r,decode:n}){if(e>=0)this.encoders[e]=r,this.decoders[e]=n;else{let s=1+e;this.builtInEncoders[s]=r,this.builtInDecoders[s]=n}}tryToEncode(e,r){for(let n=0;n<this.builtInEncoders.length;n++){let s=this.builtInEncoders[n];if(s!=null){let a=s(e,r);if(a!=null){let i=-1-n;return new $(i,a)}}}for(let n=0;n<this.encoders.length;n++){let s=this.encoders[n];if(s!=null){let a=s(e,r);if(a!=null){let i=n;return new $(i,a)}}}return e instanceof $?e:null}decode(e,r,n){let s=r<0?this.builtInDecoders[-1-r]:this.decoders[r];return s?s(e,r,n):new $(r,e)}},K=Qe;K.defaultCodec=new Qe;function J(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t)}function Nt(t){if(t instanceof ArrayBuffer)return new DataView(t);let e=J(t);return new DataView(e.buffer,e.byteOffset,e.byteLength)}var sn=100,an=2048,xe=class{constructor(e=K.defaultCodec,r=void 0,n=sn,s=an,a=!1,i=!1,o=!1){this.extensionCodec=e;this.context=r;this.maxDepth=n;this.initialBufferSize=s;this.sortKeys=a;this.forceFloat32=i;this.ignoreUndefined=o;this.pos=0;this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}getUint8Array(){return this.bytes.subarray(0,this.pos)}reinitializeState(){this.pos=0}encode(e){return this.reinitializeState(),this.doEncode(e,1),this.getUint8Array()}doEncode(e,r){if(r>this.maxDepth)throw new Error(`Too deep objects in depth ${r}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.encodeObject(e,r)}ensureBufferSizeToWrite(e){let r=this.pos+e;this.view.byteLength<r&&this.resizeBuffer(r*2)}resizeBuffer(e){let r=new ArrayBuffer(e),n=new Uint8Array(r),s=new DataView(r);n.set(this.bytes),this.view=s,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){if(e.length>Tt){let s=Xe(e);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),St(e,this.bytes,this.pos),this.pos+=s}else{let s=Xe(e);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),wt(e,this.bytes,this.pos),this.pos+=s}}encodeObject(e,r){let n=this.extensionCodec.tryToEncode(e,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,r);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,r);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){let r=e.byteLength;if(r<256)this.writeU8(196),this.writeU8(r);else if(r<65536)this.writeU8(197),this.writeU16(r);else if(r<4294967296)this.writeU8(198),this.writeU32(r);else throw new Error(`Too large binary: ${r}`);let n=J(e);this.writeU8a(n)}encodeArray(e,r){let n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(let s of e)this.doEncode(s,r+1)}countWithoutUndefined(e,r){let n=0;for(let s of r)e[s]!==void 0&&n++;return n}encodeMap(e,r){let n=Object.keys(e);this.sortKeys&&n.sort();let s=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(let a of n){let i=e[a];this.ignoreUndefined&&i===void 0||(this.encodeString(a),this.doEncode(i,r+1))}}encodeExtension(e){let r=e.data.length;if(r===1)this.writeU8(212);else if(r===2)this.writeU8(213);else if(r===4)this.writeU8(214);else if(r===8)this.writeU8(215);else if(r===16)this.writeU8(216);else if(r<256)this.writeU8(199),this.writeU8(r);else if(r<65536)this.writeU8(200),this.writeU16(r);else if(r<4294967296)this.writeU8(201),this.writeU32(r);else throw new Error(`Too large extension object: ${r}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){let r=e.length;this.ensureBufferSizeToWrite(r),this.bytes.set(e,this.pos),this.pos+=r}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),Zt(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),$e(this.view,this.pos,e),this.pos+=8}};var on={};function et(t,e=on){return new xe(e.extensionCodec,e.context,e.maxDepth,e.initialBufferSize,e.sortKeys,e.forceFloat32,e.ignoreUndefined).encode(t)}function Fe(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}var dn=16,un=16,Ve=class{constructor(e=dn,r=un){this.maxKeyLength=e;this.maxLengthPerKey=r;this.hit=0;this.miss=0;this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}get(e,r,n){let s=this.caches[n-1],a=s.length;e:for(let i=0;i<a;i++){let o=s[i],d=o.bytes;for(let c=0;c<n;c++)if(d[c]!==e[r+c])continue e;return o.value}return null}store(e,r){let n=this.caches[e.length-1],s={bytes:e,value:r};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=s:n.push(s)}decode(e,r,n){let s=this.get(e,r,n);if(s!=null)return this.hit++,s;this.miss++;let a=ze(e,r,n),i=Uint8Array.prototype.slice.call(e,r,r+n);return this.store(i,a),a}};var cn=t=>{let e=typeof t;return e==="string"||e==="number"},_e=-1,rt=new DataView(new ArrayBuffer(0)),ln=new Uint8Array(rt.buffer),tt=(()=>{try{rt.getInt8(0)}catch(t){return t.constructor}throw new Error("never reached")})(),Mt=new tt("Insufficient data"),be=4294967295,pn=new Ve,re=class{constructor(e=K.defaultCodec,r=void 0,n=be,s=be,a=be,i=be,o=be,d=pn){this.extensionCodec=e;this.context=r;this.maxStrLength=n;this.maxBinLength=s;this.maxArrayLength=a;this.maxMapLength=i;this.maxExtLength=o;this.keyDecoder=d;this.totalPos=0;this.pos=0;this.view=rt;this.bytes=ln;this.headByte=_e;this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=_e}setBuffer(e){this.bytes=J(e),this.view=Nt(this.bytes),this.pos=0}appendBuffer(e){if(e=J(e).slice(),this.headByte===_e&&!this.hasRemaining())this.setBuffer(e);else{let r=this.bytes.subarray(this.pos),n=J(e),s=new Uint8Array(r.length+n.length);s.set(r),s.set(n,r.length),this.setBuffer(s)}}hasRemaining(e=1){return this.view.byteLength-this.pos>=e}createNoExtraBytesError(e){let{view:r,pos:n}=this;return new RangeError(`Extra ${r.byteLength-n} of ${r.byteLength} byte(s) found at buffer[${e}]`)}decode(e){return this.reinitializeState(),this.setBuffer(e),this.doDecodeSingleSync()}doDecodeSingleSync(){let e=this.doDecodeSync();if(this.hasRemaining())throw this.createNoExtraBytesError(this.pos);return e}async decodeAsync(e){let r=!1,n;for await(let o of e){if(r)throw this.createNoExtraBytesError(this.totalPos);this.appendBuffer(o);try{n=this.doDecodeSync(),r=!0}catch(d){if(!(d instanceof tt))throw d}this.totalPos+=this.pos}if(r){if(this.hasRemaining())throw this.createNoExtraBytesError(this.totalPos);return n}let{headByte:s,pos:a,totalPos:i}=this;throw new RangeError(`Insufficient data in parcing ${Fe(s)} at ${i} (${a} in the current buffer)`)}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,r){let n=r,s=-1;for await(let a of e){if(r&&s===0)throw this.createNoExtraBytesError(this.totalPos);this.appendBuffer(a),n&&(s=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(i){if(!(i instanceof tt))throw i}this.totalPos+=this.pos}}doDecodeSync(){e:for(;;){let e=this.readHeadByte(),r;if(e>=224)r=e-256;else if(e<192)if(e<128)r=e;else if(e<144){let s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e<160){let s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else{let s=e-160;r=this.decodeUtf8String(s,0)}else if(e===192)r=null;else if(e===194)r=!1;else if(e===195)r=!0;else if(e===202)r=this.readF32();else if(e===203)r=this.readF64();else if(e===204)r=this.readU8();else if(e===205)r=this.readU16();else if(e===206)r=this.readU32();else if(e===207)r=this.readU64();else if(e===208)r=this.readI8();else if(e===209)r=this.readI16();else if(e===210)r=this.readI32();else if(e===211)r=this.readI64();else if(e===217){let s=this.lookU8();r=this.decodeUtf8String(s,1)}else if(e===218){let s=this.lookU16();r=this.decodeUtf8String(s,2)}else if(e===219){let s=this.lookU32();r=this.decodeUtf8String(s,4)}else if(e===220){let s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else if(e===221){let s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else if(e===222){let s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e===223){let s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e===196){let s=this.lookU8();r=this.decodeBinary(s,1)}else if(e===197){let s=this.lookU16();r=this.decodeBinary(s,2)}else if(e===198){let s=this.lookU32();r=this.decodeBinary(s,4)}else if(e===212)r=this.decodeExtension(1,0);else if(e===213)r=this.decodeExtension(2,0);else if(e===214)r=this.decodeExtension(4,0);else if(e===215)r=this.decodeExtension(8,0);else if(e===216)r=this.decodeExtension(16,0);else if(e===199){let s=this.lookU8();r=this.decodeExtension(s,1)}else if(e===200){let s=this.lookU16();r=this.decodeExtension(s,2)}else if(e===201){let s=this.lookU32();r=this.decodeExtension(s,4)}else throw new Error(`Unrecognized type byte: ${Fe(e)}`);this.complete();let n=this.stack;for(;n.length>0;){let s=n[n.length-1];if(s.type===0)if(s.array[s.position]=r,s.position++,s.position===s.size)n.pop(),r=s.array;else continue e;else if(s.type===1){if(!cn(r))throw new Error("The type of key must be string or number but "+typeof r);s.key=r,s.type=2;continue e}else if(s.map[s.key]=r,s.readCount++,s.readCount===s.size)n.pop(),r=s.map;else{s.key=null,s.type=1;continue e}}return r}}readHeadByte(){return this.headByte===_e&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=_e}readArraySize(){let e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Error(`Unrecognized array type byte: ${Fe(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Error(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})}pushArrayState(e){if(e>this.maxArrayLength)throw new Error(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:e,array:new Array(e),position:0})}decodeUtf8String(e,r){if(e>this.maxStrLength)throw new Error(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+r+e)throw Mt;let n=this.pos+r,s;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?s=this.keyDecoder.decode(this.bytes,n,e):e>Et?s=kt(this.bytes,n,e):s=ze(this.bytes,n,e),this.pos+=r+e,s}stateIsMapKey(){return this.stack.length>0?this.stack[this.stack.length-1].type===1:!1}decodeBinary(e,r){if(e>this.maxBinLength)throw new Error(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+r))throw Mt;let n=this.pos+r,s=this.bytes.subarray(n,n+e);return this.pos+=r+e,s}decodeExtension(e,r){if(e>this.maxExtLength)throw new Error(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);let n=this.view.getInt8(this.pos+r),s=this.decodeBinary(e,r+1);return this.extensionCodec.decode(s,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){let e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){let e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){let e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){let e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){let e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){let e=Dt(this.view,this.pos);return this.pos+=8,e}readI64(){let e=Ke(this.view,this.pos);return this.pos+=8,e}readF32(){let e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){let e=this.view.getFloat64(this.pos);return this.pos+=8,e}};var Lt={};function nt(t,e=Lt){return new re(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decode(t)}var st=class{constructor(){this.ctx=null;this.BY_TAG={}}evalInContext(src){let evalFunction=()=>eval(src);return evalFunction.call(this.ctx)}decodeObject(t){let e={};return Object.keys(t.value).forEach(r=>{e[r]=this.decodeValue(t.value[r])}),this.BY_TAG[t.tag]=e,e}decodeFunction(t){let e=this.evalInContext(`const fn = ${t.src}; fn`);return this.BY_TAG[t.tag]=e,e}decodeClassDefinition(t){let e=this.evalInContext(`let fn = ${t.src}; fn`);return this.BY_TAG[t.tag]=e,e}decodeClassInstance(t){let e={};Object.keys(t.value).forEach(n=>{e[n]=this.decodeValue(t.value[n])});let r=this.decodeValue(t.constructor);if(r===void 0)throw new Error("failed to deserialize "+JSON.stringify(t));return Object.setPrototypeOf(e,r.prototype),e}decodeValue(t){if(t===void 0)throw new Error("attempting to decode undefined");if(t.type==="number")return t.value;if(t.type==="string")return t.value;if(t.type==="boolean")return t.value;if(t.type==="object")return this.decodeObject(t);if(t.type==="object_ref")return this.BY_TAG[t.tag];if(t.type==="function")return this.decodeFunction(t);if(t.type==="function_ref")return this.BY_TAG[t.tag];if(t.type==="class_definition")return this.decodeClassDefinition(t);if(t.type==="class_instance")return this.decodeClassInstance(t);if(t.type==="class_definition_ref")return this.BY_TAG[t.tag];throw new Error("cannot decode "+t)}decode(t,e){this.ctx=e,this.BY_TAG={};let r=nt(t);if(r.type!=="object")throw new Error("root must be an object");return this.decodeValue(r)}};var O=Symbol("APEIRO_TAG"),it=class{constructor(){this.id=0}encodeClassDefinition(e){return this.assignTag(e)?{type:"class_definition",src:e.toString(),tag:e[O]}:{type:"class_definition_ref",tag:e[O]}}encodeFunction(e){return e[O]===void 0?(e[O]=this.id,this.id++,{type:"function",tag:e[O],src:e.toString()}):{type:"function_ref",tag:e[O]}}assignTag(e){return e[O]===void 0?(e[O]=this.id,this.id++,!0):!1}encodeObject(e){if(!this.assignTag(e))return{type:"object_ref",tag:e[O]};let r={};return Object.keys(e).forEach(n=>{r[n]=this.encodeValue(e[n])}),{type:"object",value:r,tag:e[O]}}encodeNumber(e){return{type:"number",value:e}}encodeString(e){return{type:"string",value:e}}encodeBoolean(e){return{type:"boolean",value:e}}encodeClassInstance(e){let r={};return Object.keys(e).forEach(n=>{r[n]=this.encodeValue(e[n])}),{type:"class_instance",constructor:this.encodeClassDefinition(e.constructor),value:r}}encodeValue(e){if(typeof e=="number")return this.encodeNumber(e);if(typeof e=="string")return this.encodeString(e);if(typeof e=="boolean")return this.encodeBoolean(e);if(fn(e))return this.encodeObject(e);if(yn(e))return this.encodeFunction(e);if(hn(e))return this.encodeClassInstance(e);if(mn(e))return this.encodeClassDefinition(e);if(typeof e>"u")return{type:"undefined"};throw new Error("unsupported type "+typeof e+" at key "+key)}cleanValue(e){(typeof e=="object"||typeof e=="function")&&(delete e[O],Object.keys(e).forEach(r=>{this.cleanValue(e[r])}))}encode(e){if(this.id=0,typeof e!="object")throw new Error("root must be an object");let r=this.encodeValue(e);return this.cleanValue(e),et(r)}};function fn(t){return typeof t=="object"&&t.constructor===Object}function hn(t){return typeof t=="object"&&t.constructor!==Object}function yn(t){return typeof t=="function"&&t.toString().substring(0,5)!=="class"}function mn(t){return typeof t=="function"&&t.toString().substring(0,5)==="class"}var ht={};bt(ht,{BRAND:()=>qt,DIRTY:()=>Yt,EMPTY_PATH:()=>Wt,INVALID:()=>m,NEVER:()=>Ar,OK:()=>D,ParseStatus:()=>A,Schema:()=>v,ZodAny:()=>Q,ZodArray:()=>M,ZodBigInt:()=>Ee,ZodBoolean:()=>ke,ZodBranded:()=>dt,ZodDate:()=>ae,ZodDefault:()=>Je,ZodDiscriminatedUnion:()=>qe,ZodEffects:()=>C,ZodEnum:()=>Me,ZodError:()=>I,ZodFirstPartyTypeKind:()=>h,ZodFunction:()=>se,ZodIntersection:()=>de,ZodIssueCode:()=>l,ZodLazy:()=>Ce,ZodLiteral:()=>Ie,ZodMap:()=>Ue,ZodNaN:()=>Ne,ZodNativeEnum:()=>je,ZodNever:()=>N,ZodNull:()=>De,ZodNullable:()=>W,ZodNumber:()=>X,ZodObject:()=>E,ZodOptional:()=>U,ZodParsedType:()=>p,ZodPromise:()=>te,ZodRecord:()=>Oe,ZodSchema:()=>v,ZodSet:()=>ee,ZodString:()=>V,ZodTransformer:()=>C,ZodTuple:()=>L,ZodType:()=>v,ZodUndefined:()=>Ze,ZodUnion:()=>oe,ZodUnknown:()=>F,ZodVoid:()=>Ae,addIssueToContext:()=>f,any:()=>nr,array:()=>or,bigint:()=>Qt,boolean:()=>pt,custom:()=>ut,date:()=>er,default:()=>ft,defaultErrorMap:()=>ie,discriminatedUnion:()=>lr,effect:()=>ot,enum:()=>_r,function:()=>vr,getErrorMap:()=>we,getParsedType:()=>B,instanceof:()=>Gt,intersection:()=>pr,isAborted:()=>We,isAsync:()=>He,isDirty:()=>Ye,isValid:()=>Se,late:()=>Jt,lazy:()=>gr,literal:()=>xr,makeIssue:()=>Te,map:()=>yr,nan:()=>Xt,nativeEnum:()=>br,never:()=>ir,null:()=>rr,nullable:()=>Sr,number:()=>lt,object:()=>dr,objectUtil:()=>Pe,oboolean:()=>Dr,onumber:()=>Zr,optional:()=>Tr,ostring:()=>kr,preprocess:()=>Er,promise:()=>wr,quotelessJson:()=>Kt,record:()=>hr,set:()=>mr,setErrorMap:()=>Vt,strictObject:()=>ur,string:()=>ct,transformer:()=>ot,tuple:()=>fr,undefined:()=>tr,union:()=>cr,unknown:()=>sr,void:()=>ar,z:()=>ft});var vn=Object.defineProperty,gn=Object.defineProperties,xn=Object.getOwnPropertyDescriptors,Bt=Object.getOwnPropertySymbols,_n=Object.prototype.hasOwnProperty,bn=Object.prototype.propertyIsEnumerable,Rt=(t,e,r)=>e in t?vn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,u=(t,e)=>{for(var r in e||(e={}))_n.call(e,r)&&Rt(t,r,e[r]);if(Bt)for(var r of Bt(e))bn.call(e,r)&&Rt(t,r,e[r]);return t},_=(t,e)=>gn(t,xn(e)),G=(t,e,r)=>new Promise((n,s)=>{var a=d=>{try{o(r.next(d))}catch(c){s(c)}},i=d=>{try{o(r.throw(d))}catch(c){s(c)}},o=d=>d.done?n(d.value):Promise.resolve(d.value).then(a,i);o((r=r.apply(t,e)).next())}),T;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{let a={};for(let i of s)a[i]=i;return a},t.getValidEnumValues=s=>{let a=t.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),i={};for(let o of a)i[o]=s[o];return t.objectValues(i)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let a=[];for(let i in s)Object.prototype.hasOwnProperty.call(s,i)&&a.push(i);return a},t.find=(s,a)=>{for(let i of s)if(a(i))return i},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,a=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(T||(T={}));var p=T.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),B=t=>{switch(typeof t){case"undefined":return p.undefined;case"string":return p.string;case"number":return isNaN(t)?p.nan:p.number;case"boolean":return p.boolean;case"function":return p.function;case"bigint":return p.bigint;case"object":return Array.isArray(t)?p.array:t===null?p.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?p.promise:typeof Map<"u"&&t instanceof Map?p.map:typeof Set<"u"&&t instanceof Set?p.set:typeof Date<"u"&&t instanceof Date?p.date:p.object;default:return p.unknown}},l=T.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of"]),Kt=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),I=class extends Error{constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};let e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){let e=t||function(s){return s.message},r={_errors:[]},n=s=>{for(let a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(n);else if(a.code==="invalid_return_type")n(a.returnTypeError);else if(a.code==="invalid_arguments")n(a.argumentsError);else if(a.path.length===0)r._errors.push(e(a));else{let i=r,o=0;for(;o<a.path.length;){let d=a.path[o];o===a.path.length-1?(i[d]=i[d]||{_errors:[]},i[d]._errors.push(e(a))):i[d]=i[d]||{_errors:[]},i=i[d],o++}}};return n(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,T.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=e=>e.message){let e={},r=[];for(let n of this.issues)n.path.length>0?(e[n.path[0]]=e[n.path[0]]||[],e[n.path[0]].push(t(n))):r.push(t(n));return{formErrors:r,fieldErrors:e}}get formErrors(){return this.flatten()}};I.create=t=>new I(t);var ie=(t,e)=>{let r;switch(t.code){case l.invalid_type:t.received===p.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case l.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,T.jsonStringifyReplacer)}`;break;case l.unrecognized_keys:r=`Unrecognized key(s) in object: ${T.joinValues(t.keys,", ")}`;break;case l.invalid_union:r="Invalid input";break;case l.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${T.joinValues(t.options)}`;break;case l.invalid_enum_value:r=`Invalid enum value. Expected ${T.joinValues(t.options)}, received '${t.received}'`;break;case l.invalid_arguments:r="Invalid function arguments";break;case l.invalid_return_type:r="Invalid function return type";break;case l.invalid_date:r="Invalid date";break;case l.invalid_string:typeof t.validation=="object"?"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:T.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case l.too_small:t.type==="array"?r=`Array must contain ${t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be greater than ${t.inclusive?"or equal to ":""}${t.minimum}`:t.type==="date"?r=`Date must be greater than ${t.inclusive?"or equal to ":""}${new Date(t.minimum)}`:r="Invalid input";break;case l.too_big:t.type==="array"?r=`Array must contain ${t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be less than ${t.inclusive?"or equal to ":""}${t.maximum}`:t.type==="date"?r=`Date must be smaller than ${t.inclusive?"or equal to ":""}${new Date(t.maximum)}`:r="Invalid input";break;case l.custom:r="Invalid input";break;case l.invalid_intersection_types:r="Intersection results could not be merged";break;case l.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;default:r=e.defaultError,T.assertNever(t)}return{message:r}},Ft=ie;function Vt(t){Ft=t}function we(){return Ft}var Te=t=>{let{data:e,path:r,errorMaps:n,issueData:s}=t,a=[...r,...s.path||[]],i=_(u({},s),{path:a}),o="",d=n.filter(c=>!!c).slice().reverse();for(let c of d)o=c(i,{data:e,defaultError:o}).message;return _(u({},s),{path:a,message:s.message||o})},Wt=[];function f(t,e){let r=Te({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,we(),ie].filter(n=>!!n)});t.common.issues.push(r)}var A=class{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,e){let r=[];for(let n of e){if(n.status==="aborted")return m;n.status==="dirty"&&t.dirty(),r.push(n.value)}return{status:t.value,value:r}}static mergeObjectAsync(t,e){return G(this,null,function*(){let r=[];for(let n of e)r.push({key:yield n.key,value:yield n.value});return A.mergeObjectSync(t,r)})}static mergeObjectSync(t,e){let r={};for(let n of e){let{key:s,value:a}=n;if(s.status==="aborted"||a.status==="aborted")return m;s.status==="dirty"&&t.dirty(),a.status==="dirty"&&t.dirty(),(typeof a.value<"u"||n.alwaysSet)&&(r[s.value]=a.value)}return{status:t.value,value:r}}},m=Object.freeze({status:"aborted"}),Yt=t=>({status:"dirty",value:t}),D=t=>({status:"valid",value:t}),We=t=>t.status==="aborted",Ye=t=>t.status==="dirty",Se=t=>t.status==="valid",He=t=>typeof Promise!==void 0&&t instanceof Promise,x;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(x||(x={}));var j=class{constructor(t,e,r,n){this.parent=t,this.data=e,this._path=r,this._key=n}get path(){return this._path.concat(this._key)}},zt=(t,e)=>{if(Se(e))return{success:!0,data:e.value};{if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");let r=new I(t.common.issues);return{success:!1,error:r}}};function g(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,i)=>a.code!=="invalid_type"?{message:i.defaultError}:typeof i.data>"u"?{message:n??i.defaultError}:{message:r??i.defaultError},description:s}}var v=class{constructor(t){this.spa=this.safeParseAsync,this.superRefine=this._refinement,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.default=this.default.bind(this),this.describe=this.describe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return B(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:B(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new A,ctx:{common:t.parent.common,data:t.data,parsedType:B(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let e=this._parse(t);if(He(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){let e=this._parse(t);return Promise.resolve(e)}parse(t,e){let r=this.safeParse(t,e);if(r.success)return r.data;throw r.error}safeParse(t,e){var r;let n={common:{issues:[],async:(r=e?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:e?.errorMap},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:B(t)},s=this._parseSync({data:t,path:n.path,parent:n});return zt(n,s)}parseAsync(t,e){return G(this,null,function*(){let r=yield this.safeParseAsync(t,e);if(r.success)return r.data;throw r.error})}safeParseAsync(t,e){return G(this,null,function*(){let r={common:{issues:[],contextualErrorMap:e?.errorMap,async:!0},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:B(t)},n=this._parse({data:t,path:[],parent:r}),s=yield He(n)?n:Promise.resolve(n);return zt(r,s)})}refine(t,e){let r=n=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(n):e;return this._refinement((n,s)=>{let a=t(n),i=()=>s.addIssue(u({code:l.custom},r(n)));return typeof Promise<"u"&&a instanceof Promise?a.then(o=>o?!0:(i(),!1)):a?!0:(i(),!1)})}refinement(t,e){return this._refinement((r,n)=>t(r)?!0:(n.addIssue(typeof e=="function"?e(r,n):e),!1))}_refinement(t){return new C({schema:this,typeName:h.ZodEffects,effect:{type:"refinement",refinement:t}})}optional(){return U.create(this)}nullable(){return W.create(this)}nullish(){return this.optional().nullable()}array(){return M.create(this)}promise(){return te.create(this)}or(t){return oe.create([this,t])}and(t){return de.create(this,t)}transform(t){return new C({schema:this,typeName:h.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let e=typeof t=="function"?t:()=>t;return new Je({innerType:this,defaultValue:e,typeName:h.ZodDefault})}brand(){return new dt(u({typeName:h.ZodBranded,type:this},g(void 0)))}describe(t){let e=this.constructor;return new e(_(u({},this._def),{description:t}))}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},wn=/^c[^\s-]{8,}$/i,Tn=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Sn=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,V=class extends v{constructor(){super(...arguments),this._regex=(t,e,r)=>this.refinement(n=>t.test(n),u({validation:e,code:l.invalid_string},x.errToObj(r))),this.nonempty=t=>this.min(1,x.errToObj(t)),this.trim=()=>new V(_(u({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}_parse(t){if(this._getType(t)!==p.string){let n=this._getOrReturnCtx(t);return f(n,{code:l.invalid_type,expected:p.string,received:n.parsedType}),m}let e=new A,r;for(let n of this._def.checks)if(n.kind==="min")t.data.length<n.value&&(r=this._getOrReturnCtx(t,r),f(r,{code:l.too_small,minimum:n.value,type:"string",inclusive:!0,message:n.message}),e.dirty());else if(n.kind==="max")t.data.length>n.value&&(r=this._getOrReturnCtx(t,r),f(r,{code:l.too_big,maximum:n.value,type:"string",inclusive:!0,message:n.message}),e.dirty());else if(n.kind==="email")Sn.test(t.data)||(r=this._getOrReturnCtx(t,r),f(r,{validation:"email",code:l.invalid_string,message:n.message}),e.dirty());else if(n.kind==="uuid")Tn.test(t.data)||(r=this._getOrReturnCtx(t,r),f(r,{validation:"uuid",code:l.invalid_string,message:n.message}),e.dirty());else if(n.kind==="cuid")wn.test(t.data)||(r=this._getOrReturnCtx(t,r),f(r,{validation:"cuid",code:l.invalid_string,message:n.message}),e.dirty());else if(n.kind==="url")try{new URL(t.data)}catch{r=this._getOrReturnCtx(t,r),f(r,{validation:"url",code:l.invalid_string,message:n.message}),e.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(t.data)||(r=this._getOrReturnCtx(t,r),f(r,{validation:"regex",code:l.invalid_string,message:n.message}),e.dirty())):n.kind==="trim"?t.data=t.data.trim():n.kind==="startsWith"?t.data.startsWith(n.value)||(r=this._getOrReturnCtx(t,r),f(r,{code:l.invalid_string,validation:{startsWith:n.value},message:n.message}),e.dirty()):n.kind==="endsWith"?t.data.endsWith(n.value)||(r=this._getOrReturnCtx(t,r),f(r,{code:l.invalid_string,validation:{endsWith:n.value},message:n.message}),e.dirty()):T.assertNever(n);return{status:e.value,value:t.data}}_addCheck(t){return new V(_(u({},this._def),{checks:[...this._def.checks,t]}))}email(t){return this._addCheck(u({kind:"email"},x.errToObj(t)))}url(t){return this._addCheck(u({kind:"url"},x.errToObj(t)))}uuid(t){return this._addCheck(u({kind:"uuid"},x.errToObj(t)))}cuid(t){return this._addCheck(u({kind:"cuid"},x.errToObj(t)))}regex(t,e){return this._addCheck(u({kind:"regex",regex:t},x.errToObj(e)))}startsWith(t,e){return this._addCheck(u({kind:"startsWith",value:t},x.errToObj(e)))}endsWith(t,e){return this._addCheck(u({kind:"endsWith",value:t},x.errToObj(e)))}min(t,e){return this._addCheck(u({kind:"min",value:t},x.errToObj(e)))}max(t,e){return this._addCheck(u({kind:"max",value:t},x.errToObj(e)))}length(t,e){return this.min(t,e).max(t,e)}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get minLength(){let t=null;for(let e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxLength(){let t=null;for(let e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}};V.create=t=>new V(u({checks:[],typeName:h.ZodString},g(t)));function En(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,a=parseInt(t.toFixed(s).replace(".","")),i=parseInt(e.toFixed(s).replace(".",""));return a%i/Math.pow(10,s)}var X=class extends v{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._getType(t)!==p.number){let n=this._getOrReturnCtx(t);return f(n,{code:l.invalid_type,expected:p.number,received:n.parsedType}),m}let e,r=new A;for(let n of this._def.checks)n.kind==="int"?T.isInteger(t.data)||(e=this._getOrReturnCtx(t,e),f(e,{code:l.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):n.kind==="min"?(n.inclusive?t.data<n.value:t.data<=n.value)&&(e=this._getOrReturnCtx(t,e),f(e,{code:l.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,message:n.message}),r.dirty()):n.kind==="max"?(n.inclusive?t.data>n.value:t.data>=n.value)&&(e=this._getOrReturnCtx(t,e),f(e,{code:l.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,message:n.message}),r.dirty()):n.kind==="multipleOf"?En(t.data,n.value)!==0&&(e=this._getOrReturnCtx(t,e),f(e,{code:l.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):T.assertNever(n);return{status:r.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,x.toString(e))}gt(t,e){return this.setLimit("min",t,!1,x.toString(e))}lte(t,e){return this.setLimit("max",t,!0,x.toString(e))}lt(t,e){return this.setLimit("max",t,!1,x.toString(e))}setLimit(t,e,r,n){return new X(_(u({},this._def),{checks:[...this._def.checks,{kind:t,value:e,inclusive:r,message:x.toString(n)}]}))}_addCheck(t){return new X(_(u({},this._def),{checks:[...this._def.checks,t]}))}int(t){return this._addCheck({kind:"int",message:x.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:x.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:x.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:x.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:x.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:x.toString(e)})}get minValue(){let t=null;for(let e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(let e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int")}};X.create=t=>new X(u({checks:[],typeName:h.ZodNumber},g(t)));var Ee=class extends v{_parse(t){if(this._getType(t)!==p.bigint){let e=this._getOrReturnCtx(t);return f(e,{code:l.invalid_type,expected:p.bigint,received:e.parsedType}),m}return D(t.data)}};Ee.create=t=>new Ee(u({typeName:h.ZodBigInt},g(t)));var ke=class extends v{_parse(t){if(this._getType(t)!==p.boolean){let e=this._getOrReturnCtx(t);return f(e,{code:l.invalid_type,expected:p.boolean,received:e.parsedType}),m}return D(t.data)}};ke.create=t=>new ke(u({typeName:h.ZodBoolean},g(t)));var ae=class extends v{_parse(t){if(this._getType(t)!==p.date){let n=this._getOrReturnCtx(t);return f(n,{code:l.invalid_type,expected:p.date,received:n.parsedType}),m}if(isNaN(t.data.getTime())){let n=this._getOrReturnCtx(t);return f(n,{code:l.invalid_date}),m}let e=new A,r;for(let n of this._def.checks)n.kind==="min"?t.data.getTime()<n.value&&(r=this._getOrReturnCtx(t,r),f(r,{code:l.too_small,message:n.message,inclusive:!0,minimum:n.value,type:"date"}),e.dirty()):n.kind==="max"?t.data.getTime()>n.value&&(r=this._getOrReturnCtx(t,r),f(r,{code:l.too_big,message:n.message,inclusive:!0,maximum:n.value,type:"date"}),e.dirty()):T.assertNever(n);return{status:e.value,value:new Date(t.data.getTime())}}_addCheck(t){return new ae(_(u({},this._def),{checks:[...this._def.checks,t]}))}min(t,e){return this._addCheck({kind:"min",value:t.getTime(),message:x.toString(e)})}max(t,e){return this._addCheck({kind:"max",value:t.getTime(),message:x.toString(e)})}get minDate(){let t=null;for(let e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t!=null?new Date(t):null}};ae.create=t=>new ae(u({checks:[],typeName:h.ZodDate},g(t)));var Ze=class extends v{_parse(t){if(this._getType(t)!==p.undefined){let e=this._getOrReturnCtx(t);return f(e,{code:l.invalid_type,expected:p.undefined,received:e.parsedType}),m}return D(t.data)}};Ze.create=t=>new Ze(u({typeName:h.ZodUndefined},g(t)));var De=class extends v{_parse(t){if(this._getType(t)!==p.null){let e=this._getOrReturnCtx(t);return f(e,{code:l.invalid_type,expected:p.null,received:e.parsedType}),m}return D(t.data)}};De.create=t=>new De(u({typeName:h.ZodNull},g(t)));var Q=class extends v{constructor(){super(...arguments),this._any=!0}_parse(t){return D(t.data)}};Q.create=t=>new Q(u({typeName:h.ZodAny},g(t)));var F=class extends v{constructor(){super(...arguments),this._unknown=!0}_parse(t){return D(t.data)}};F.create=t=>new F(u({typeName:h.ZodUnknown},g(t)));var N=class extends v{_parse(t){let e=this._getOrReturnCtx(t);return f(e,{code:l.invalid_type,expected:p.never,received:e.parsedType}),m}};N.create=t=>new N(u({typeName:h.ZodNever},g(t)));var Ae=class extends v{_parse(t){if(this._getType(t)!==p.undefined){let e=this._getOrReturnCtx(t);return f(e,{code:l.invalid_type,expected:p.void,received:e.parsedType}),m}return D(t.data)}};Ae.create=t=>new Ae(u({typeName:h.ZodVoid},g(t)));var M=class extends v{_parse(t){let{ctx:e,status:r}=this._processInputParams(t),n=this._def;if(e.parsedType!==p.array)return f(e,{code:l.invalid_type,expected:p.array,received:e.parsedType}),m;if(n.minLength!==null&&e.data.length<n.minLength.value&&(f(e,{code:l.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,message:n.minLength.message}),r.dirty()),n.maxLength!==null&&e.data.length>n.maxLength.value&&(f(e,{code:l.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,message:n.maxLength.message}),r.dirty()),e.common.async)return Promise.all(e.data.map((a,i)=>n.type._parseAsync(new j(e,a,e.path,i)))).then(a=>A.mergeArray(r,a));let s=e.data.map((a,i)=>n.type._parseSync(new j(e,a,e.path,i)));return A.mergeArray(r,s)}get element(){return this._def.type}min(t,e){return new M(_(u({},this._def),{minLength:{value:t,message:x.toString(e)}}))}max(t,e){return new M(_(u({},this._def),{maxLength:{value:t,message:x.toString(e)}}))}length(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}};M.create=(t,e)=>new M(u({type:t,minLength:null,maxLength:null,typeName:h.ZodArray},g(e)));var Pe;(function(t){t.mergeShapes=(e,r)=>u(u({},e),r)})(Pe||(Pe={}));var $t=t=>e=>new E(_(u({},t),{shape:()=>u(u({},t.shape()),e)}));function ne(t){if(t instanceof E){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=U.create(ne(n))}return new E(_(u({},t._def),{shape:()=>e}))}else return t instanceof M?M.create(ne(t.element)):t instanceof U?U.create(ne(t.unwrap())):t instanceof W?W.create(ne(t.unwrap())):t instanceof L?L.create(t.items.map(e=>ne(e))):t}var E=class extends v{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=$t(this._def),this.extend=$t(this._def)}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),e=T.objectKeys(t);return this._cached={shape:t,keys:e}}_parse(t){if(this._getType(t)!==p.object){let o=this._getOrReturnCtx(t);return f(o,{code:l.invalid_type,expected:p.object,received:o.parsedType}),m}let{status:e,ctx:r}=this._processInputParams(t),{shape:n,keys:s}=this._getCached(),a=[];if(!(this._def.catchall instanceof N&&this._def.unknownKeys==="strip"))for(let o in r.data)s.includes(o)||a.push(o);let i=[];for(let o of s){let d=n[o],c=r.data[o];i.push({key:{status:"valid",value:o},value:d._parse(new j(r,c,r.path,o)),alwaysSet:o in r.data})}if(this._def.catchall instanceof N){let o=this._def.unknownKeys;if(o==="passthrough")for(let d of a)i.push({key:{status:"valid",value:d},value:{status:"valid",value:r.data[d]}});else if(o==="strict")a.length>0&&(f(r,{code:l.unrecognized_keys,keys:a}),e.dirty());else if(o!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let o=this._def.catchall;for(let d of a){let c=r.data[d];i.push({key:{status:"valid",value:d},value:o._parse(new j(r,c,r.path,d)),alwaysSet:d in r.data})}}return r.common.async?Promise.resolve().then(()=>G(this,null,function*(){let o=[];for(let d of i){let c=yield d.key;o.push({key:c,value:yield d.value,alwaysSet:d.alwaysSet})}return o})).then(o=>A.mergeObjectSync(e,o)):A.mergeObjectSync(e,i)}get shape(){return this._def.shape()}strict(t){return x.errToObj,new E(u(_(u({},this._def),{unknownKeys:"strict"}),t!==void 0?{errorMap:(e,r)=>{var n,s,a,i;let o=(a=(s=(n=this._def).errorMap)===null||s===void 0?void 0:s.call(n,e,r).message)!==null&&a!==void 0?a:r.defaultError;return e.code==="unrecognized_keys"?{message:(i=x.errToObj(t).message)!==null&&i!==void 0?i:o}:{message:o}}}:{}))}strip(){return new E(_(u({},this._def),{unknownKeys:"strip"}))}passthrough(){return new E(_(u({},this._def),{unknownKeys:"passthrough"}))}setKey(t,e){return this.augment({[t]:e})}merge(t){return new E({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>Pe.mergeShapes(this._def.shape(),t._def.shape()),typeName:h.ZodObject})}catchall(t){return new E(_(u({},this._def),{catchall:t}))}pick(t){let e={};return T.objectKeys(t).map(r=>{this.shape[r]&&(e[r]=this.shape[r])}),new E(_(u({},this._def),{shape:()=>e}))}omit(t){let e={};return T.objectKeys(this.shape).map(r=>{T.objectKeys(t).indexOf(r)===-1&&(e[r]=this.shape[r])}),new E(_(u({},this._def),{shape:()=>e}))}deepPartial(){return ne(this)}partial(t){let e={};if(t)return T.objectKeys(this.shape).map(r=>{T.objectKeys(t).indexOf(r)===-1?e[r]=this.shape[r]:e[r]=this.shape[r].optional()}),new E(_(u({},this._def),{shape:()=>e}));for(let r in this.shape){let n=this.shape[r];e[r]=n.optional()}return new E(_(u({},this._def),{shape:()=>e}))}required(){let t={};for(let e in this.shape){let r=this.shape[e];for(;r instanceof U;)r=r._def.innerType;t[e]=r}return new E(_(u({},this._def),{shape:()=>t}))}keyof(){return Ht(T.objectKeys(this.shape))}};E.create=(t,e)=>new E(u({shape:()=>t,unknownKeys:"strip",catchall:N.create(),typeName:h.ZodObject},g(e)));E.strictCreate=(t,e)=>new E(u({shape:()=>t,unknownKeys:"strict",catchall:N.create(),typeName:h.ZodObject},g(e)));E.lazycreate=(t,e)=>new E(u({shape:t,unknownKeys:"strip",catchall:N.create(),typeName:h.ZodObject},g(e)));var oe=class extends v{_parse(t){let{ctx:e}=this._processInputParams(t),r=this._def.options;function n(s){for(let i of s)if(i.result.status==="valid")return i.result;for(let i of s)if(i.result.status==="dirty")return e.common.issues.push(...i.ctx.common.issues),i.result;let a=s.map(i=>new I(i.ctx.common.issues));return f(e,{code:l.invalid_union,unionErrors:a}),m}if(e.common.async)return Promise.all(r.map(s=>G(this,null,function*(){let a=_(u({},e),{common:_(u({},e.common),{issues:[]}),parent:null});return{result:yield s._parseAsync({data:e.data,path:e.path,parent:a}),ctx:a}}))).then(n);{let s,a=[];for(let o of r){let d=_(u({},e),{common:_(u({},e.common),{issues:[]}),parent:null}),c=o._parseSync({data:e.data,path:e.path,parent:d});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:d}),d.common.issues.length&&a.push(d.common.issues)}if(s)return e.common.issues.push(...s.ctx.common.issues),s.result;let i=a.map(o=>new I(o));return f(e,{code:l.invalid_union,unionErrors:i}),m}}get options(){return this._def.options}};oe.create=(t,e)=>new oe(u({options:t,typeName:h.ZodUnion},g(e)));var qe=class extends v{_parse(t){let{ctx:e}=this._processInputParams(t);if(e.parsedType!==p.object)return f(e,{code:l.invalid_type,expected:p.object,received:e.parsedType}),m;let r=this.discriminator,n=e.data[r],s=this.options.get(n);return s?e.common.async?s._parseAsync({data:e.data,path:e.path,parent:e}):s._parseSync({data:e.data,path:e.path,parent:e}):(f(e,{code:l.invalid_union_discriminator,options:this.validDiscriminatorValues,path:[r]}),m)}get discriminator(){return this._def.discriminator}get validDiscriminatorValues(){return Array.from(this.options.keys())}get options(){return this._def.options}static create(t,e,r){let n=new Map;try{e.forEach(s=>{let a=s.shape[t].value;n.set(a,s)})}catch{throw new Error("The discriminator value could not be extracted from all the provided schemas")}if(n.size!==e.length)throw new Error("Some of the discriminator values are not unique");return new qe(u({typeName:h.ZodDiscriminatedUnion,discriminator:t,options:n},g(r)))}};function at(t,e){let r=B(t),n=B(e);if(t===e)return{valid:!0,data:t};if(r===p.object&&n===p.object){let s=T.objectKeys(e),a=T.objectKeys(t).filter(o=>s.indexOf(o)!==-1),i=u(u({},t),e);for(let o of a){let d=at(t[o],e[o]);if(!d.valid)return{valid:!1};i[o]=d.data}return{valid:!0,data:i}}else if(r===p.array&&n===p.array){if(t.length!==e.length)return{valid:!1};let s=[];for(let a=0;a<t.length;a++){let i=t[a],o=e[a],d=at(i,o);if(!d.valid)return{valid:!1};s.push(d.data)}return{valid:!0,data:s}}else return r===p.date&&n===p.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var de=class extends v{_parse(t){let{status:e,ctx:r}=this._processInputParams(t),n=(s,a)=>{if(We(s)||We(a))return m;let i=at(s.value,a.value);return i.valid?((Ye(s)||Ye(a))&&e.dirty(),{status:e.value,value:i.data}):(f(r,{code:l.invalid_intersection_types}),m)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,a])=>n(s,a)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};de.create=(t,e,r)=>new de(u({left:t,right:e,typeName:h.ZodIntersection},g(r)));var L=class extends v{_parse(t){let{status:e,ctx:r}=this._processInputParams(t);if(r.parsedType!==p.array)return f(r,{code:l.invalid_type,expected:p.array,received:r.parsedType}),m;if(r.data.length<this._def.items.length)return f(r,{code:l.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),m;!this._def.rest&&r.data.length>this._def.items.length&&(f(r,{code:l.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),e.dirty());let n=r.data.map((s,a)=>{let i=this._def.items[a]||this._def.rest;return i?i._parse(new j(r,s,r.path,a)):null}).filter(s=>!!s);return r.common.async?Promise.all(n).then(s=>A.mergeArray(e,s)):A.mergeArray(e,n)}get items(){return this._def.items}rest(t){return new L(_(u({},this._def),{rest:t}))}};L.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new L(u({items:t,typeName:h.ZodTuple,rest:null},g(e)))};var Oe=class extends v{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:e,ctx:r}=this._processInputParams(t);if(r.parsedType!==p.object)return f(r,{code:l.invalid_type,expected:p.object,received:r.parsedType}),m;let n=[],s=this._def.keyType,a=this._def.valueType;for(let i in r.data)n.push({key:s._parse(new j(r,i,r.path,i)),value:a._parse(new j(r,r.data[i],r.path,i))});return r.common.async?A.mergeObjectAsync(e,n):A.mergeObjectSync(e,n)}get element(){return this._def.valueType}static create(t,e,r){return e instanceof v?new Oe(u({keyType:t,valueType:e,typeName:h.ZodRecord},g(r))):new Oe(u({keyType:V.create(),valueType:t,typeName:h.ZodRecord},g(e)))}},Ue=class extends v{_parse(t){let{status:e,ctx:r}=this._processInputParams(t);if(r.parsedType!==p.map)return f(r,{code:l.invalid_type,expected:p.map,received:r.parsedType}),m;let n=this._def.keyType,s=this._def.valueType,a=[...r.data.entries()].map(([i,o],d)=>({key:n._parse(new j(r,i,r.path,[d,"key"])),value:s._parse(new j(r,o,r.path,[d,"value"]))}));if(r.common.async){let i=new Map;return Promise.resolve().then(()=>G(this,null,function*(){for(let o of a){let d=yield o.key,c=yield o.value;if(d.status==="aborted"||c.status==="aborted")return m;(d.status==="dirty"||c.status==="dirty")&&e.dirty(),i.set(d.value,c.value)}return{status:e.value,value:i}}))}else{let i=new Map;for(let o of a){let d=o.key,c=o.value;if(d.status==="aborted"||c.status==="aborted")return m;(d.status==="dirty"||c.status==="dirty")&&e.dirty(),i.set(d.value,c.value)}return{status:e.value,value:i}}}};Ue.create=(t,e,r)=>new Ue(u({valueType:e,keyType:t,typeName:h.ZodMap},g(r)));var ee=class extends v{_parse(t){let{status:e,ctx:r}=this._processInputParams(t);if(r.parsedType!==p.set)return f(r,{code:l.invalid_type,expected:p.set,received:r.parsedType}),m;let n=this._def;n.minSize!==null&&r.data.size<n.minSize.value&&(f(r,{code:l.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,message:n.minSize.message}),e.dirty()),n.maxSize!==null&&r.data.size>n.maxSize.value&&(f(r,{code:l.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,message:n.maxSize.message}),e.dirty());let s=this._def.valueType;function a(o){let d=new Set;for(let c of o){if(c.status==="aborted")return m;c.status==="dirty"&&e.dirty(),d.add(c.value)}return{status:e.value,value:d}}let i=[...r.data.values()].map((o,d)=>s._parse(new j(r,o,r.path,d)));return r.common.async?Promise.all(i).then(o=>a(o)):a(i)}min(t,e){return new ee(_(u({},this._def),{minSize:{value:t,message:x.toString(e)}}))}max(t,e){return new ee(_(u({},this._def),{maxSize:{value:t,message:x.toString(e)}}))}size(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}};ee.create=(t,e)=>new ee(u({valueType:t,minSize:null,maxSize:null,typeName:h.ZodSet},g(e)));var se=class extends v{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:e}=this._processInputParams(t);if(e.parsedType!==p.function)return f(e,{code:l.invalid_type,expected:p.function,received:e.parsedType}),m;function r(i,o){return Te({data:i,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,we(),ie].filter(d=>!!d),issueData:{code:l.invalid_arguments,argumentsError:o}})}function n(i,o){return Te({data:i,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,we(),ie].filter(d=>!!d),issueData:{code:l.invalid_return_type,returnTypeError:o}})}let s={errorMap:e.common.contextualErrorMap},a=e.data;return this._def.returns instanceof te?D((...i)=>G(this,null,function*(){let o=new I([]),d=yield this._def.args.parseAsync(i,s).catch(b=>{throw o.addIssue(r(i,b)),o}),c=yield a(...d);return yield this._def.returns._def.type.parseAsync(c,s).catch(b=>{throw o.addIssue(n(c,b)),o})})):D((...i)=>{let o=this._def.args.safeParse(i,s);if(!o.success)throw new I([r(i,o.error)]);let d=a(...o.data),c=this._def.returns.safeParse(d,s);if(!c.success)throw new I([n(d,c.error)]);return c.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new se(_(u({},this._def),{args:L.create(t).rest(F.create())}))}returns(t){return new se(_(u({},this._def),{returns:t}))}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,e,r){return new se(u({args:t||L.create([]).rest(F.create()),returns:e||F.create(),typeName:h.ZodFunction},g(r)))}},Ce=class extends v{get schema(){return this._def.getter()}_parse(t){let{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}};Ce.create=(t,e)=>new Ce(u({getter:t,typeName:h.ZodLazy},g(e)));var Ie=class extends v{_parse(t){if(t.data!==this._def.value){let e=this._getOrReturnCtx(t);return f(e,{code:l.invalid_literal,expected:this._def.value}),m}return{status:"valid",value:t.data}}get value(){return this._def.value}};Ie.create=(t,e)=>new Ie(u({value:t,typeName:h.ZodLiteral},g(e)));function Ht(t,e){return new Me(u({values:t,typeName:h.ZodEnum},g(e)))}var Me=class extends v{_parse(t){if(typeof t.data!="string"){let e=this._getOrReturnCtx(t),r=this._def.values;return f(e,{expected:T.joinValues(r),received:e.parsedType,code:l.invalid_type}),m}if(this._def.values.indexOf(t.data)===-1){let e=this._getOrReturnCtx(t),r=this._def.values;return f(e,{received:e.data,code:l.invalid_enum_value,options:r}),m}return D(t.data)}get options(){return this._def.values}get enum(){let t={};for(let e of this._def.values)t[e]=e;return t}get Values(){let t={};for(let e of this._def.values)t[e]=e;return t}get Enum(){let t={};for(let e of this._def.values)t[e]=e;return t}};Me.create=Ht;var je=class extends v{_parse(t){let e=T.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==p.string&&r.parsedType!==p.number){let n=T.objectValues(e);return f(r,{expected:T.joinValues(n),received:r.parsedType,code:l.invalid_type}),m}if(e.indexOf(t.data)===-1){let n=T.objectValues(e);return f(r,{received:r.data,code:l.invalid_enum_value,options:n}),m}return D(t.data)}get enum(){return this._def.values}};je.create=(t,e)=>new je(u({values:t,typeName:h.ZodNativeEnum},g(e)));var te=class extends v{_parse(t){let{ctx:e}=this._processInputParams(t);if(e.parsedType!==p.promise&&e.common.async===!1)return f(e,{code:l.invalid_type,expected:p.promise,received:e.parsedType}),m;let r=e.parsedType===p.promise?e.data:Promise.resolve(e.data);return D(r.then(n=>this._def.type.parseAsync(n,{path:e.path,errorMap:e.common.contextualErrorMap})))}};te.create=(t,e)=>new te(u({type:t,typeName:h.ZodPromise},g(e)));var C=class extends v{innerType(){return this._def.schema}_parse(t){let{status:e,ctx:r}=this._processInputParams(t),n=this._def.effect||null;if(n.type==="preprocess"){let a=n.transform(r.data);return r.common.async?Promise.resolve(a).then(i=>this._def.schema._parseAsync({data:i,path:r.path,parent:r})):this._def.schema._parseSync({data:a,path:r.path,parent:r})}let s={addIssue:a=>{f(r,a),a.fatal?e.abort():e.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),n.type==="refinement"){let a=i=>{let o=n.refinement(i,s);if(r.common.async)return Promise.resolve(o);if(o instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return i};if(r.common.async===!1){let i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?m:(i.status==="dirty"&&e.dirty(),a(i.value),{status:e.value,value:i.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>i.status==="aborted"?m:(i.status==="dirty"&&e.dirty(),a(i.value).then(()=>({status:e.value,value:i.value}))))}if(n.type==="transform")if(r.common.async===!1){let a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Se(a))return a;let i=n.transform(a.value,s);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:i}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>Se(a)?Promise.resolve(n.transform(a.value,s)).then(i=>({status:e.value,value:i})):a);T.assertNever(n)}};C.create=(t,e,r)=>new C(u({schema:t,typeName:h.ZodEffects,effect:e},g(r)));C.createWithPreprocess=(t,e,r)=>new C(u({schema:e,effect:{type:"preprocess",transform:t},typeName:h.ZodEffects},g(r)));var U=class extends v{_parse(t){return this._getType(t)===p.undefined?D(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};U.create=(t,e)=>new U(u({innerType:t,typeName:h.ZodOptional},g(e)));var W=class extends v{_parse(t){return this._getType(t)===p.null?D(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};W.create=(t,e)=>new W(u({innerType:t,typeName:h.ZodNullable},g(e)));var Je=class extends v{_parse(t){let{ctx:e}=this._processInputParams(t),r=e.data;return e.parsedType===p.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:e.path,parent:e})}removeDefault(){return this._def.innerType}};Je.create=(t,e)=>new U(u({innerType:t,typeName:h.ZodOptional},g(e)));var Ne=class extends v{_parse(t){if(this._getType(t)!==p.nan){let e=this._getOrReturnCtx(t);return f(e,{code:l.invalid_type,expected:p.nan,received:e.parsedType}),m}return{status:"valid",value:t.data}}};Ne.create=t=>new Ne(u({typeName:h.ZodNaN},g(t)));var qt=Symbol("zod_brand"),dt=class extends v{_parse(t){let{ctx:e}=this._processInputParams(t),r=e.data;return this._def.type._parse({data:r,path:e.path,parent:e})}unwrap(){return this._def.type}},ut=(t,e={},r)=>t?Q.create().superRefine((n,s)=>{if(!t(n)){let a=typeof e=="function"?e(n):e,i=typeof a=="string"?{message:a}:a;s.addIssue(_(u({code:"custom"},i),{fatal:r}))}}):Q.create(),Jt={object:E.lazycreate},h;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded"})(h||(h={}));var Gt=(t,e={message:`Input not instance of ${t.name}`})=>ut(r=>r instanceof t,e,!0),ct=V.create,lt=X.create,Xt=Ne.create,Qt=Ee.create,pt=ke.create,er=ae.create,tr=Ze.create,rr=De.create,nr=Q.create,sr=F.create,ir=N.create,ar=Ae.create,or=M.create,dr=E.create,ur=E.strictCreate,cr=oe.create,lr=qe.create,pr=de.create,fr=L.create,hr=Oe.create,yr=Ue.create,mr=ee.create,vr=se.create,gr=Ce.create,xr=Ie.create,_r=Me.create,br=je.create,wr=te.create,ot=C.create,Tr=U.create,Sr=W.create,Er=C.createWithPreprocess,kr=()=>ct().optional(),Zr=()=>lt().optional(),Dr=()=>pt().optional(),Ar=m,ft=Object.freeze({__proto__:null,getParsedType:B,ZodParsedType:p,defaultErrorMap:ie,setErrorMap:Vt,getErrorMap:we,makeIssue:Te,EMPTY_PATH:Wt,addIssueToContext:f,ParseStatus:A,INVALID:m,DIRTY:Yt,OK:D,isAborted:We,isDirty:Ye,isValid:Se,isAsync:He,ZodType:v,ZodString:V,ZodNumber:X,ZodBigInt:Ee,ZodBoolean:ke,ZodDate:ae,ZodUndefined:Ze,ZodNull:De,ZodAny:Q,ZodUnknown:F,ZodNever:N,ZodVoid:Ae,ZodArray:M,get objectUtil(){return Pe},ZodObject:E,ZodUnion:oe,ZodDiscriminatedUnion:qe,ZodIntersection:de,ZodTuple:L,ZodRecord:Oe,ZodMap:Ue,ZodSet:ee,ZodFunction:se,ZodLazy:Ce,ZodLiteral:Ie,ZodEnum:Me,ZodNativeEnum:je,ZodPromise:te,ZodEffects:C,ZodTransformer:C,ZodOptional:U,ZodNullable:W,ZodDefault:Je,ZodNaN:Ne,BRAND:qt,ZodBranded:dt,custom:ut,Schema:v,ZodSchema:v,late:Jt,get ZodFirstPartyTypeKind(){return h},any:nr,array:or,bigint:Qt,boolean:pt,date:er,discriminatedUnion:lr,effect:ot,enum:_r,function:vr,instanceof:Gt,intersection:pr,lazy:gr,literal:xr,map:yr,nan:Xt,nativeEnum:br,never:ir,null:rr,nullable:Sr,number:lt,object:dr,oboolean:Dr,onumber:Zr,optional:Tr,ostring:kr,preprocess:Er,promise:wr,record:hr,set:mr,strictObject:ur,string:ct,transformer:ot,tuple:fr,undefined:tr,union:cr,unknown:sr,void:ar,NEVER:Ar,ZodIssueCode:l,quotelessJson:Kt,ZodError:I});var yt=Object.assign({default:ft},ht),kn=Object.create,Ur=Object.defineProperty,Zn=Object.getOwnPropertyDescriptor,Dn=Object.getOwnPropertyNames,Pr=Object.getOwnPropertySymbols,An=Object.getPrototypeOf,Cr=Object.prototype.hasOwnProperty,Pn=Object.prototype.propertyIsEnumerable,Gi=(t=>typeof q<"u"?q:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof q<"u"?q:e)[r]}):t)(function(t){if(typeof q<"u")return q.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')}),On=(t,e)=>{var r={};for(var n in t)Cr.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Pr)for(var n of Pr(t))e.indexOf(n)<0&&Pn.call(t,n)&&(r[n]=t[n]);return r},S=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Un=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Dn(e))!Cr.call(t,s)&&s!==r&&Ur(t,s,{get:()=>e[s],enumerable:!(n=Zn(e,s))||n.enumerable});return t},Cn=(t,e,r)=>(r=t!=null?kn(An(t)):{},Un(e||!t||!t.__esModule?Ur(r,"default",{value:t,enumerable:!0}):r,t)),In=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseOptionalDef=void 0;var e=P(),r=(n,s)=>{if(s.currentPath.toString()===s.propertyPath.toString())return(0,e.parseDef)(n.innerType._def,s);let a=(0,e.parseDef)(n.innerType._def,s.addToPath("anyOf","1"));return a?{anyOf:[{not:{}},a]}:{}};t.parseOptionalDef=r}),jn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAnyDef=void 0;function e(){return{}}t.parseAnyDef=e}),Nn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseArrayDef=void 0;var e=yt,r=P();function n(s,a){var i,o;let d={type:"array"};return((o=(i=s.type)===null||i===void 0?void 0:i._def)===null||o===void 0?void 0:o.typeName)!==e.ZodFirstPartyTypeKind.ZodAny&&(d.items=(0,r.parseDef)(s.type._def,a.addToPath("items"))),s.minLength&&(d.minItems=s.minLength.value),s.maxLength&&(d.maxItems=s.maxLength.value),d}t.parseArrayDef=n}),Mn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBigintDef=void 0;function e(){return{type:"integer",format:"int64"}}t.parseBigintDef=e}),Ln=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBooleanDef=void 0;function e(){return{type:"boolean"}}t.parseBooleanDef=e}),Bn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDateDef=void 0;function e(){return{type:"string",format:"date-time"}}t.parseDateDef=e}),Rn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDefaultDef=void 0;var e=P();function r(n,s){return Object.assign(Object.assign({},(0,e.parseDef)(n.innerType._def,s)),{default:n.defaultValue()})}t.parseDefaultDef=r}),zn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEffectsDef=void 0;var e=P();function r(n,s){return s.effectStrategy==="input"?(0,e.parseDef)(n.schema._def,s):{}}t.parseEffectsDef=r}),$n=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnumDef=void 0;function e(r){return{type:"string",enum:r.values}}t.parseEnumDef=e}),Kn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIntersectionDef=void 0;var e=P();function r(n,s){let a=[(0,e.parseDef)(n.left._def,s.addToPath("allOf","0")),(0,e.parseDef)(n.right._def,s.addToPath("allOf","1"))].filter(i=>!!i);return a.length?{allOf:a}:void 0}t.parseIntersectionDef=r}),Fn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseLiteralDef=void 0;function e(r,n){let s=typeof r.value;return s!=="bigint"&&s!=="number"&&s!=="boolean"&&s!=="string"?{type:Array.isArray(r.value)?"array":"object"}:n.target==="openApi3"?{type:s==="bigint"?"integer":s,enum:[r.value]}:{type:s==="bigint"?"integer":s,const:r.value}}t.parseLiteralDef=e}),Vn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMapDef=void 0;var e=P();function r(n,s){let a=(0,e.parseDef)(n.keyType._def,s.addToPath("items","items","0"))||{},i=(0,e.parseDef)(n.valueType._def,s.addToPath("items","items","1"))||{};return{type:"array",maxItems:125,items:{type:"array",items:[a,i],minItems:2,maxItems:2}}}t.parseMapDef=r}),Wn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNativeEnumDef=void 0;function e(r){let n=Object.values(r.values).filter(a=>typeof a=="number").map(toString),s=Object.values(r.values).filter((a,i)=>i>=n.length);return{type:n.length===0?"string":n.length===s.length?"number":["string","number"],enum:s}}t.parseNativeEnumDef=e}),Yn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNeverDef=void 0;function e(){return{not:{}}}t.parseNeverDef=e}),Hn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNullDef=void 0;function e(r){return r.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}t.parseNullDef=e}),Ir=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnionDef=t.primitiveMappings=void 0;var e=P();t.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function r(s,a){if(a.target==="openApi3")return n(s,a);let i=s.options instanceof Map?Array.from(s.options.values()):s.options;if(i.every(o=>o._def.typeName in t.primitiveMappings&&(!o._def.checks||!o._def.checks.length))){let o=i.reduce((d,c)=>{let b=t.primitiveMappings[c._def.typeName];return b&&!d.includes(b)?[...d,b]:d},[]);return{type:o.length>1?o:o[0]}}else if(i.every(o=>o._def.typeName==="ZodLiteral")){let o=i.reduce((d,c)=>{let b=typeof c._def.value;switch(b){case"string":case"number":case"boolean":return[...d,b];case"bigint":return[...d,"integer"];case"object":if(c._def.value===null)return[...d,"null"];case"symbol":case"undefined":case"function":default:return d}},[]);if(o.length===i.length){let d=o.filter((c,b,Z)=>Z.indexOf(c)===b);return{type:d.length>1?d:d[0],enum:i.reduce((c,b)=>c.includes(b._def.value)?c:[...c,b._def.value],[])}}}else if(i.every(o=>o._def.typeName==="ZodEnum"))return{type:"string",enum:i.reduce((o,d)=>[...o,...d._def.values.filter(c=>!o.includes(c))],[])};return n(s,a)}t.parseUnionDef=r;var n=(s,a)=>{let i=(s.options instanceof Map?Array.from(s.options.values()):s.options).map((o,d)=>(0,e.parseDef)(o._def,a.addToPath("anyOf",d.toString()))).filter(o=>!!o);return i.length?{anyOf:i}:void 0}}),qn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNullableDef=void 0;var e=P(),r=Ir();function n(s,a){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(s.innerType._def.typeName)&&(!s.innerType._def.checks||!s.innerType._def.checks.length))return a.target==="openApi3"?{type:r.primitiveMappings[s.innerType._def.typeName],nullable:!0}:{type:[r.primitiveMappings[s.innerType._def.typeName],"null"]};let i=(0,e.parseDef)(s.innerType._def,a.addToPath("anyOf","0"));return i?a.target==="openApi3"?Object.assign(Object.assign({},i),{nullable:!0}):{anyOf:[i,{type:"null"}]}:void 0}t.parseNullableDef=n}),Jn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNumberDef=void 0;function e(r,n){let s={type:"number"};if(r.checks)for(let a of r.checks)switch(a.kind){case"int":s.type="integer";break;case"min":n.target==="jsonSchema7"?a.inclusive?s.minimum=a.value:s.exclusiveMinimum=a.value:(a.inclusive||(s.exclusiveMinimum=!0),s.minimum=a.value);break;case"max":n.target==="jsonSchema7"?a.inclusive?s.maximum=a.value:s.exclusiveMaximum=a.value:(a.inclusive||(s.exclusiveMaximum=!0),s.maximum=a.value);break;case"multipleOf":s.multipleOf=a.value;break}return s}t.parseNumberDef=e}),Gn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseObjectDef=void 0;var e=P();function r(n,s){var a;let i=Object.assign(Object.assign({type:"object"},Object.entries(n.shape()).reduce((o,[d,c])=>{if(c===void 0||c._def===void 0)return o;let b=(0,e.parseDef)(c._def,s.addToPathAsProperty("properties",d));return b===void 0?o:{properties:Object.assign(Object.assign({},o.properties),{[d]:b}),required:c.isOptional()?o.required:[...o.required,d]}},{properties:{},required:[]})),{additionalProperties:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":(a=(0,e.parseDef)(n.catchall._def,s.addToPath("additionalProperties")))!==null&&a!==void 0?a:!0});return i.required.length||delete i.required,i}t.parseObjectDef=r}),Xn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePromiseDef=void 0;var e=P();function r(n,s){return(0,e.parseDef)(n.type._def,s)}t.parsePromiseDef=r}),jr=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseStringDef=void 0;function e(r){let n={type:"string"};if(r.checks)for(let s of r.checks)switch(s.kind){case"min":n.minLength=s.value;break;case"max":n.maxLength=s.value;break;case"email":n.format="email";break;case"url":n.format="uri";break;case"uuid":n.format="uuid";break;case"regex":n.pattern=s.regex.source;break;case"cuid":n.pattern="^c[^\\s-]{8,}$";break;case"trim":break;default:(a=>{})(s)}return n}t.parseStringDef=e}),Qn=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseRecordDef=void 0;var e=yt,r=P(),n=jr();function s(a,i){var o,d,c;let b={type:"object",additionalProperties:(0,r.parseDef)(a.valueType._def,i.addToPath("additionalProperties"))||{}};if(((o=a.keyType)===null||o===void 0?void 0:o._def.typeName)===e.ZodFirstPartyTypeKind.ZodString&&((d=a.keyType._def.checks)===null||d===void 0?void 0:d.length)){let Z=Object.entries((0,n.parseStringDef)(a.keyType._def)).reduce((R,[z,H])=>z==="type"?R:Object.assign(Object.assign({},R),{[z]:H}),{});return Object.assign(Object.assign({},b),{propertyNames:Z})}else if(((c=a.keyType)===null||c===void 0?void 0:c._def.typeName)===e.ZodFirstPartyTypeKind.ZodEnum)return Object.assign(Object.assign({},b),{propertyNames:{enum:a.keyType._def.values}});return b}t.parseRecordDef=s}),es=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSetDef=void 0;var e=P();function r(n,s){let a=(0,e.parseDef)(n.valueType._def,s.addToPath("items")),i={type:"array",items:a};return n.minSize&&(i.minItems=n.minSize.value),n.maxSize&&(i.maxItems=n.maxSize.value),i}t.parseSetDef=r}),ts=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTupleDef=void 0;var e=P();function r(n,s){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((a,i)=>(0,e.parseDef)(a._def,s.addToPath("items",i.toString()))).reduce((a,i)=>i===void 0?a:[...a,i],[]),additionalItems:(0,e.parseDef)(n.rest._def,s.addToPath("additionalItems"))}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((a,i)=>(0,e.parseDef)(a._def,s.addToPath("items",i.toString()))).reduce((a,i)=>i===void 0?a:[...a,i],[])}}t.parseTupleDef=r}),rs=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUndefinedDef=void 0;function e(){return{not:{}}}t.parseUndefinedDef=e}),ns=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnknownDef=void 0;function e(){return{}}t.parseUnknownDef=e}),P=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDef=void 0;var e=yt,r=In(),n=jn(),s=Nn(),a=Mn(),i=Ln(),o=Bn(),d=Rn(),c=zn(),b=$n(),Z=Kn(),R=Fn(),z=Vn(),H=Wn(),ce=Yn(),le=Hn(),pe=qn(),fe=Jn(),he=Gn(),ye=Xn(),me=Qn(),ve=es(),Be=jr(),Lr=ts(),Br=rs(),Rr=Ir(),zr=ns();function _t(y,k){let w=k.items.find(Wr=>Object.is(Wr.def,y));if(w)return $r(w,k);let ge={def:y,path:k.currentPath,jsonSchema:void 0};k.items.push(ge);let Re=Fr(y,y.typeName,k);return Re&&Vr(y,Re),ge.jsonSchema=Re,Re}t.parseDef=_t;var $r=(y,k)=>{switch(k.$refStrategy){case"root":return{$ref:y.path.length===0?"":y.path.length===1?`${y.path[0]}/`:y.path.join("/")};case"relative":return{$ref:Kr(k.currentPath,y.path)};case"none":return y.path.length<k.currentPath.length&&y.path.every((w,ge)=>k.currentPath[ge]===w)?(console.warn(`Recursive reference detected at ${k.currentPath.join("/")}! Defaulting to any`),{}):y.jsonSchema}},Kr=(y,k)=>{let w=0;for(;w<y.length&&w<k.length&&y[w]===k[w];w++);return[(y.length-w).toString(),...k.slice(w)].join("/")},Fr=(y,k,w)=>{switch(k){case e.ZodFirstPartyTypeKind.ZodString:return(0,Be.parseStringDef)(y);case e.ZodFirstPartyTypeKind.ZodNumber:return(0,fe.parseNumberDef)(y,w);case e.ZodFirstPartyTypeKind.ZodObject:return(0,he.parseObjectDef)(y,w);case e.ZodFirstPartyTypeKind.ZodBigInt:return(0,a.parseBigintDef)();case e.ZodFirstPartyTypeKind.ZodBoolean:return(0,i.parseBooleanDef)();case e.ZodFirstPartyTypeKind.ZodDate:return(0,o.parseDateDef)();case e.ZodFirstPartyTypeKind.ZodUndefined:return(0,Br.parseUndefinedDef)();case e.ZodFirstPartyTypeKind.ZodNull:return(0,le.parseNullDef)(w);case e.ZodFirstPartyTypeKind.ZodArray:return(0,s.parseArrayDef)(y,w);case e.ZodFirstPartyTypeKind.ZodUnion:case e.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,Rr.parseUnionDef)(y,w);case e.ZodFirstPartyTypeKind.ZodIntersection:return(0,Z.parseIntersectionDef)(y,w);case e.ZodFirstPartyTypeKind.ZodTuple:return(0,Lr.parseTupleDef)(y,w);case e.ZodFirstPartyTypeKind.ZodRecord:return(0,me.parseRecordDef)(y,w);case e.ZodFirstPartyTypeKind.ZodLiteral:return(0,R.parseLiteralDef)(y,w);case e.ZodFirstPartyTypeKind.ZodEnum:return(0,b.parseEnumDef)(y);case e.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,H.parseNativeEnumDef)(y);case e.ZodFirstPartyTypeKind.ZodNullable:return(0,pe.parseNullableDef)(y,w);case e.ZodFirstPartyTypeKind.ZodOptional:return(0,r.parseOptionalDef)(y,w);case e.ZodFirstPartyTypeKind.ZodMap:return(0,z.parseMapDef)(y,w);case e.ZodFirstPartyTypeKind.ZodSet:return(0,ve.parseSetDef)(y,w);case e.ZodFirstPartyTypeKind.ZodLazy:return _t(y.getter()._def,w);case e.ZodFirstPartyTypeKind.ZodPromise:return(0,ye.parsePromiseDef)(y,w);case e.ZodFirstPartyTypeKind.ZodNaN:case e.ZodFirstPartyTypeKind.ZodNever:return(0,ce.parseNeverDef)();case e.ZodFirstPartyTypeKind.ZodEffects:return(0,c.parseEffectsDef)(y,w);case e.ZodFirstPartyTypeKind.ZodAny:return(0,n.parseAnyDef)();case e.ZodFirstPartyTypeKind.ZodUnknown:return(0,zr.parseUnknownDef)();case e.ZodFirstPartyTypeKind.ZodDefault:return(0,d.parseDefaultDef)(y,w);case e.ZodFirstPartyTypeKind.ZodFunction:case e.ZodFirstPartyTypeKind.ZodVoid:return;default:return(ge=>{})(k)}},Vr=(y,k)=>(y.description&&(k.description=y.description),k)}),ss=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.References=void 0;var e=class{constructor(r=["#"],n=[],s="root",a="input",i="jsonSchema7",o=[]){this.currentPath=r,this.items=n,this.$refStrategy=s,this.effectStrategy=a,this.target=i,this.propertyPath=o}addToPath(...r){return new e([...this.currentPath,...r],this.items,this.$refStrategy,this.effectStrategy,this.target,this.propertyPath)}addToPathAsProperty(...r){return new e([...this.currentPath,...r],this.items,this.$refStrategy,this.effectStrategy,this.target,[...this.currentPath,...r])}};t.References=e}),is=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zodToJsonSchema=void 0;var e=P(),r=ss(),n="http://json-schema.org/draft-07/schema#";function s(a,i){var o,d,c,b,Z,R,z,H,ce,le,pe,fe,he,ye,me,ve;if(typeof i=="object")return i.name===void 0?i.target==="openApi3"?(0,e.parseDef)(a._def,new r.References((o=i.basePath)!==null&&o!==void 0?o:["#"],[],(d=i.$refStrategy)!==null&&d!==void 0?d:"root",i.effectStrategy,i.target)):Object.assign({$schema:n},(0,e.parseDef)(a._def,new r.References((c=i.basePath)!==null&&c!==void 0?c:["#"],[],(b=i.$refStrategy)!==null&&b!==void 0?b:"root",i.effectStrategy,i.target))):i.target==="openApi3"?{$ref:i.$refStrategy==="relative"?`0/${(Z=i.definitionPath)!==null&&Z!==void 0?Z:"definitions"}/${i.name}`:`#/${(R=i.definitionPath)!==null&&R!==void 0?R:"definitions"}/${i.name}`,[(z=i.definitionPath)!==null&&z!==void 0?z:"definitions"]:{[i.name]:(0,e.parseDef)(a._def,new r.References([...(H=i.basePath)!==null&&H!==void 0?H:["#"],(ce=i.definitionPath)!==null&&ce!==void 0?ce:"definitions",i.name],[],(le=i.$refStrategy)!==null&&le!==void 0?le:"root",i.effectStrategy,i.target))||{}}}:{$schema:n,$ref:i.$refStrategy==="relative"?`0/${(pe=i.definitionPath)!==null&&pe!==void 0?pe:"definitions"}/${i.name}`:`#/${(fe=i.definitionPath)!==null&&fe!==void 0?fe:"definitions"}/${i.name}`,[(he=i.definitionPath)!==null&&he!==void 0?he:"definitions"]:{[i.name]:(0,e.parseDef)(a._def,new r.References([...(ye=i.basePath)!==null&&ye!==void 0?ye:["#"],(me=i.definitionPath)!==null&&me!==void 0?me:"definitions",i.name],[],(ve=i.$refStrategy)!==null&&ve!==void 0?ve:"root",i.effectStrategy,i.target))||{}}};if(typeof i=="string"){let Be=i;return{$schema:n,$ref:`#/definitions/${Be}`,definitions:{[Be]:(0,e.parseDef)(a._def,new r.References)||{}}}}else return Object.assign({$schema:n},(0,e.parseDef)(a._def,new r.References))}t.zodToJsonSchema=s}),as=S(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zodToJsonSchema=void 0;var e=is();Object.defineProperty(t,"zodToJsonSchema",{enumerable:!0,get:function(){return e.zodToJsonSchema}}),t.default=e.zodToJsonSchema}),Nr=Cn(as());var{zodToJsonSchema:Xi}=Nr,Mr=Nr,{default:Or}=Mr,os=On(Mr,["default"]),mt=Or!==void 0?Or:os;var Y=class{constructor(e,r=void 0){this.parent=e;this.s={};this.pc=0;this.ch=[];this.aw=null;this.logs=[];this.root=void 0;this.res=void 0;r&&(this.s=r.s,this.pc=r.pc,this.ch=r.ch.map(n=>new Y(this,n)),this.aw=r.aw),e&&(this.root=e.root)}debug(){console.log(">>> start"),this.aw&&console.log("awaiting:",this.aw),this.res&&console.log("result:",this.res),console.log(">>> end"),console.log()}log(e){this.root?this.root.log(e):this.logs.push(e)}subframe(){if(this.ch.length>0)return this.ch[0];let e=new Y(this.root||this);return this.ch.push(e),e}end(e=void 0){return this.res=e,this.parent?.ch.pop(),e}serialize(){return encode({s:this.s,pc:this.pc,ch:this.ch.map(e=>e.serialize()),aw:this.aw,logs:this.logs,res:this.res})}};var vt=class extends Error{constructor(){super()}},ue=class extends vt{constructor(r){super();this.idx=r}};function gt(t){return t instanceof Le?{until_input:t.serialize(),idx:t.idx}:!0}var Le=class extends ue{constructor(r,n){super(r);this.idx=r;this.schema=n}serialize(){return this.schema}};function ds(t){return mt(t,"$")}function us(t){return t?.constructor?.name==="GeneratorFunction"}var xt=class{constructor(e,r){this.f=e;this._counter=0;this._state=[];this._data={};this._lastSuspension=void 0;this._frame=void 0;r&&(this._state=r?.s,this._data=r?.d,this._lastSuspension=r?.suspended)}run_fn(){try{let e=null;e=this.f(this),this._frame.res=e}catch(e){if(e instanceof ue)this._frame.aw=gt(e);else throw e}return this._frame}run_generator(){try{let e=null,r=this.f(this);e=r.next().value,this._frame.res=e,r.next().value}catch(e){if(e instanceof ue)this._frame.aw=gt(e);else throw e}return this._frame}run(){return us(this.f)?this.run_generator():this.run_fn()}setData(e){this._data=e}getData(){return{...this._data}}newSuspensionUntilInput(e){return new Le(this._counter-1,e)}recv(e){}useUIInput(e){let r=ds(e);if(this._frame.aw&&this._frame.aw?.until_input===void 0){let n=this._frame.aw;return this._frame.aw=void 0,n}else throw this.newSuspensionUntilInput(r)}frame(){return this._frame||(this._frame=new Y(void 0)),this._frame}loadFrame(e){this._frame=new Y(void 0,e)}supply(e){this._frame.aw=e}log(e){this._frame?.log(e)}};function cs(t,e,r){let n=new xt(t,{});return e&&n.loadFrame(e),r&&n.supply(r),n.run()}return Gr(ls);})();
