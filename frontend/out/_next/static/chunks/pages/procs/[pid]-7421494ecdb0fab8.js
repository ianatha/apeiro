(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[861],{89595:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/procs/[pid]",function(){return i(87941)}])},61137:function(e,n,i){"use strict";i.d(n,{H:function(){return u}});var r=i(11527),s=i(62300),l=i(56580),t=i(21095),d=i(36418),o=i(95400),c=i(61063);i(50959);var a=i(27636);function u(e){let n,{mid:i,debug:u}=e,{data:x}=(0,a.b7)(i);(null==u?void 0:u.frames)&&(n=u.frames[u.frames.length-1]);let h=function(e){if(void 0==e)return[];let n="//# programCounterMapping=",i=e.indexOf(n);if(i>=0){let r=e.indexOf("\n",i),s=e.slice(i+n.length,-1==r?void 0:r);return console.log(s),JSON.parse(s)}return[]}(null==x?void 0:x.compiled_src);return(0,r.jsx)(r.Fragment,{children:x&&(0,r.jsxs)(s.m,{size:"lg",variant:"with-line",children:[(0,r.jsxs)(l.t,{mb:"1em",children:[(0,r.jsx)(t.O,{children:"Original"}),(0,r.jsx)(t.O,{children:"Instrumented"})]}),(0,r.jsxs)(d.n,{children:[(0,r.jsx)(o.x,{children:(0,r.jsx)(c.E,{children:(0,r.jsx)(c.E,{children:(0,r.jsx)("pre",{children:function(e,n,i){if(void 0==e||void 0==n)return i;for(let r of(e.fnhash=parseInt(e.fnhash),n))if(r.fnhash==e.fnhash&&r.pc==e.$pc){let e=r.start_loc-1;r.end_loc,i=i.slice(0,e)+">>>>> BLOCKING HERE <<<<< "+i.slice(e);break}return i}(n,h,x.src)})})})}),(0,r.jsx)(o.x,{children:(0,r.jsx)(c.E,{children:(0,r.jsx)("pre",{children:x.compiled_src})})})]})]})})}},87941:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return U},log:function(){return K},transformSchemaDescriptionToTitle:function(){return M}});var r=i(11527),s=i(16772),l=i.n(s),t=i(15490),d=i(50959),o=i(85634),c=i(89352),a=i(92578),u=i(41153),x=i(37543),h=i(98480),j=i(50084),f=i(73615),p=i(23054),m=i(586),v=i(62300),g=i(56580),b=i(21095),O=i(36418),_=i(95400),S=i(18456),w=i(73495),y=i(71106),E=i(27636),k=i(6163),z=i(38104),N=i(12721),J=i(61137),C=i(72270),F=i(53941),I=i(56035),Z=i(6014),R=i(45489),X=i(31792),P=i(60016);function T(e){let{pid:n,schema:i}=e,s=(0,N.Z)(),l=(0,d.useRef)(null),t=(0,d.useRef)(null),[o,c]=(0,d.useState)(!1),u=async()=>{var e,i,r,l,d;null===(e=t.current)||void 0===e||e.updateOptions({readOnly:!0}),c("Sending");try{let e=null!==(l=null===(i=t.current)||void 0===i?void 0:i.getValue())&&void 0!==l?l:"",d=JSON.parse(e);await s.supply(n,d),null===(r=t.current)||void 0===r||r.updateOptions({readOnly:!1}),c(!1)}catch(e){alert(e),null===(d=t.current)||void 0===d||d.updateOptions({readOnly:!1}),c(!1)}};return(0,r.jsxs)(a.xu,{children:[(0,r.jsxs)("pre",{style:{background:"azure"},children:["Schema: ",JSON.stringify(i,null,2)]}),(0,r.jsx)(P.ZP,{height:"5vh",defaultLanguage:"json",beforeMount:function(e){},onMount:function(e,n){l.current=n,t.current=e},defaultValue:"{\n}",options:{minimap:{enabled:!1}}}),(0,r.jsx)(w.z,{variant:"secondary",leftIcon:(0,r.jsx)(j.J,{as:k.mW3}),onClick:u,children:o?(0,r.jsx)(I.$,{}):"Send"})]})}function D(e){var n,i,s,l,t;let{process:o}=e,c=(0,N.Z)(),[u,x]=d.useState(!1),[h,j]=d.useState(!1),[p,m]=d.useState({}),v=async e=>{x(!0),j(!0);try{await c.supply(o.proc_id,p),m({})}catch(e){alert(e)}finally{x(!1),j(!1)}};return(0,r.jsxs)(f.K,{children:[(0,r.jsx)(C.X,{size:"lg",children:o.name}),(0,r.jsx)(C.X,{size:"sm",variant:"monospace",children:o.proc_id}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("a",{href:"/modules/".concat(o.module_id),children:"Edit"})}),(0,r.jsx)(F.i,{}),(null==o?void 0:null===(n=o.val)||void 0===n?void 0:n.qr)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(X.tv,{value:null==o?void 0:null===(i=o.val)||void 0===i?void 0:i.qr}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]}),(null==o?void 0:null===(s=o.val)||void 0===s?void 0:s.jsonschema)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F.i,{}),(0,r.jsx)(C.X,{size:"sm",children:"Awaiting UI Input"}),(0,r.jsx)(a.xu,{children:(0,r.jsx)(Z.ZP,{readonly:h,formData:p,schema:M(o.val.jsonschema),validator:R.Z,onChange:e=>{m(e.formData)},onSubmit:v,onError:K("errors"),children:(0,r.jsx)(w.z,{variant:"primary",type:"submit",minW:"3xs",children:h?(0,r.jsx)(I.$,{}):"Submit"})})})]}),o.val&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F.i,{}),(0,r.jsx)(C.X,{size:"sm",children:"Result"}),(0,r.jsx)("pre",{children:JSON.stringify(o.val,null,2)})]}),(null==o?void 0:o.suspension)&&!(null==o?void 0:null===(t=o.suspension)||void 0===t?void 0:null===(l=t.definitions)||void 0===l?void 0:l.until_input)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F.i,{}),(0,r.jsx)(C.X,{size:"sm",children:"Awaiting non-UI input"}),(0,r.jsx)(T,{pid:o.proc_id,schema:null==o?void 0:o.suspension})]})]})}function H(e){let{pid:n}=e,i=(0,t.useRouter)(),{data:s,mutate:l}=(0,E.xD)(n),{data:o,mutate:c}=(0,E.J$)(n),[C,F]=d.useState(!1),I=(0,N.Z)();return((0,d.useEffect)(()=>{if(void 0===n)return;let e=I.watch(n,()=>{F(!0),l(),c()});return()=>{e.close()}},[n,l,c]),void 0===s)?(0,r.jsx)(r.Fragment,{}):(0,r.jsxs)(r.Fragment,{children:[C&&(0,r.jsx)(a.xu,{as:"section",pt:{base:"4",md:"8"},pb:{base:"12",md:"24"},px:{base:"4",md:"8"},position:"absolute",right:"4",bottom:"2",children:(0,r.jsx)(u.k,{direction:"row-reverse",children:(0,r.jsxs)(u.k,{direction:{base:"column",sm:"row"},width:{base:"full",sm:"md"},boxShadow:(0,x.ff)("md","md-dark"),bg:"bg-surface",borderRadius:"lg",overflow:"hidden",children:[(0,r.jsx)(h.M,{display:{base:"none",sm:"flex"},bg:"blue.500",px:"5",children:(0,r.jsx)(j.J,{as:k.H33,boxSize:"10",color:"white"})}),(0,r.jsxs)(f.K,{direction:"row",p:"4",spacing:"3",flex:"1",children:[(0,r.jsx)(f.K,{spacing:"2.5",flex:"1",children:(0,r.jsx)(p.x,{fontSize:"sm",fontWeight:"medium",children:"Process Status Updated"})}),(0,r.jsx)(m.P,{transform:"translateY(-6px)",onClick:e=>F(!1)})]})]})})}),(0,r.jsx)(y.Z,{p:8,children:(0,r.jsxs)(v.m,{size:"lg",variant:"with-line",children:[(0,r.jsxs)(g.t,{mb:"1em",children:[(0,r.jsx)(b.O,{children:"Overview"}),(0,r.jsx)(b.O,{children:"Source"}),(0,r.jsx)(b.O,{children:"Debug"})]}),(0,r.jsxs)(O.n,{children:[(0,r.jsxs)(_.x,{children:[(0,r.jsx)(D,{process:s}),(0,r.jsx)(S.U,{pt:12,children:(0,r.jsx)(w.z,{leftIcon:(0,r.jsx)(j.J,{as:z.cuL}),onClick:e=>{i.push("/modules/".concat(s.mid.replace("mid_",""),"?fix=true"))},children:"There's a bug"})})]}),(0,r.jsx)(_.x,{children:(0,r.jsx)(J.H,{mid:s.module_id,debug:o})}),(0,r.jsxs)(_.x,{children:[(0,r.jsx)("pre",{children:JSON.stringify(s,null,2)}),(0,r.jsx)("pre",{children:JSON.stringify(o,null,2)})]})]})]})})]})}let K=e=>console.log.bind(console,e);function M(e){return Object.entries(null==e?void 0:e.properties).forEach(e=>{let[n,i]=e;i.description&&(i.title=i.description,delete i.description)}),e}var U=()=>{let{pid:e}=(0,t.useRouter)().query;return(0,r.jsxs)(c.Z,{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:o.TN}),(0,r.jsx)("meta",{name:"description",content:"Apeiro"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.svg"})]}),(0,r.jsx)(o.gV,{children:(0,r.jsx)(H,{pid:e})})]})}}},function(e){e.O(0,[548,127,312,784,610,323,793,774,888,179],function(){return e(e.s=89595)}),_N_E=e.O()}]);